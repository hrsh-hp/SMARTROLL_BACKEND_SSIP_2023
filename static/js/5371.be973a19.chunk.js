"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5371],{6333:(e,s,l)=>{l.r(s),l.d(s,{default:()=>h});var t=l(2791),r=l(2937),i=l(5294),n=(l(8379),l(3255),l(4085),l(8386),l(2585)),c=(l(2958),l(9979),l(9160),l(2389)),a=l(7689),o=l(3645),d=l(184);const h=()=>{const{state:e,dispatch:s}=(0,t.useContext)(n.y),[l,h]=(0,t.useState)(!1),{accessToken:u,refreshToken:x,currentBatch:j}=e,[m,g]=(0,t.useState)([]),[p,b]=(0,t.useState)(null),[w,_]=(0,t.useState)([]),[f,v]=(0,t.useState)(null),[S,T]=(0,t.useState)(null),[k,y]=(0,t.useState)(0),[N,C]=(0,t.useState)(!1);(0,a.s0)();(0,t.useEffect)((()=>{j.slug&&M(j.slug)}),[j]);const M=async e=>{const s=i.Z.create();let l={"Content-Type":"application/json","ngrok-skip-browser-warning":!0},t=await(0,o.J)(s,"/manage/get_semesters","get",l,null,{batch_slug:e});if(0==t.error){let e=t.response;g(e.data.data)}else console.log(t.error)};(0,t.useEffect)((()=>{p&&(async()=>{const e=i.Z.create();let s={"Content-Type":"application/json","ngrok-skip-browser-warning":!0},l=await(0,o.J)(e,"/manage/timetable/get_timetable","get",s,null,{semester_slug:p});if(0==l.error){let e=l.response;console.log(e),_(e.data.timetable);const s={};e.data.timetable.schedules.map(((e,l)=>{e.lectures.map(((e,l)=>{s[e.slug]=!1}))})),console.log(s),C(s)}else console.log(l.error)})()}),[p,k]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(r.rb,{className:"mb-3",children:(0,d.jsx)(r.b7,{children:(0,d.jsxs)(r.xH,{children:[(0,d.jsx)(r.bn,{children:"Semester"}),(0,d.jsx)(r.sl,{children:(0,d.jsxs)(r.LX,{"aria-label":"Default select example",onChange:e=>{b(e.target.value)},children:[(0,d.jsx)("option",{value:"",children:"Select Semester"}),m.map(((e,s)=>(0,d.jsxs)("option",{value:e.slug,children:["Semester - ",e.no]},s)))]})})]})})}),(0,d.jsx)(r.rb,{children:(0,d.jsx)(r.b7,{children:(0,d.jsxs)(r.xH,{children:[(0,d.jsx)(r.bn,{children:"TimeTable"}),(0,d.jsx)(r.sl,{style:p?{}:{display:"flex",justifyContent:"center"},children:p?(0,d.jsxs)(r.Sx,{align:"middle",className:"w-100 mb-0 border text-center",hover:!0,responsive:!0,children:[(0,d.jsxs)(r.V,{color:"light",children:[(0,d.jsxs)(r.T6,{children:[(0,d.jsx)(r.is,{rowSpan:2,style:{width:"5rem",height:"auto"},children:(0,d.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/a/ad/Schedule_or_Calendar_Flat_Icon.svg"})}),(0,d.jsx)(r.is,{children:"10:30"}),(0,d.jsx)(r.is,{children:"11:30"}),(0,d.jsx)(r.is,{children:"1:00"}),(0,d.jsx)(r.is,{children:"2:00"}),(0,d.jsx)(r.is,{children:"3:15"}),(0,d.jsx)(r.is,{children:"4:15"})]}),(0,d.jsxs)(r.T6,{children:[(0,d.jsx)(r.is,{children:"11:30"}),(0,d.jsx)(r.is,{children:"12:30"}),(0,d.jsx)(r.is,{children:"2:00"}),(0,d.jsx)(r.is,{children:"3:00"}),(0,d.jsx)(r.is,{children:"4:15"}),(0,d.jsx)(r.is,{children:"5:15"})]})]}),(0,d.jsx)(r.NR,{children:w.schedules&&w.schedules.length>0?w.schedules.map(((e,s)=>(0,d.jsxs)(r.T6,{children:[(0,d.jsx)(r.is,{children:e.day},s),e.lectures.map(((s,l)=>(0,d.jsxs)(r.NN,{onClick:l=>{((e,s)=>{console.log(e),console.log(s),v(e),T(s)})(s,e),h(!0)},onMouseEnter:e=>{var l;l=s.slug,console.log("enter"),C((e=>({...e,[l]:!0})))},onMouseLeave:e=>{var l;l=s.slug,C((e=>({...e,[l]:!1})))},children:[s.classroom&&s.teacher?(0,d.jsx)(r.KF,{placement:"top-start",children:(0,d.jsxs)(r.oo,{autohide:!1,visible:N[s.slug],children:[(0,d.jsxs)(r.xZ,{closeButton:!0,children:[(0,d.jsx)("svg",{className:"rounded me-2",width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid slice",focusable:"false",role:"img",children:(0,d.jsx)("rect",{width:"100%",height:"100%",fill:"#007AFF"})}),(0,d.jsx)("div",{className:"fw-bold me-auto",children:"Lecture Details"})]}),(0,d.jsxs)(r.S3,{children:[(0,d.jsx)("strong",{children:"Classroom"})," - ",s.classroom.class_name,(0,d.jsx)("br",{}),(0,d.jsx)("strong",{children:"Teacher"})," - ",s.teacher.profile.name,(0,d.jsx)("br",{}),(0,d.jsx)("strong",{children:"Time"})," - ",s.start_time," ",(0,d.jsx)("strong",{children:"To"})," ",s.end_time]})]})}):null,s.subject?(0,d.jsx)("div",{children:(0,d.jsx)("strong",{style:{color:"gray"},children:s.subject.subject_name})}):"-"]},s.slug)))]},e.slug))):null})]}):(0,d.jsxs)(r.oo,{animation:!1,autohide:!1,visible:!0,children:[(0,d.jsxs)(r.xZ,{children:[(0,d.jsx)("svg",{className:"rounded me-2",width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid slice",focusable:"false",role:"img",children:(0,d.jsx)("rect",{width:"100%",height:"100%",fill:"#007AFF"})}),(0,d.jsx)("div",{className:"fw-bold me-auto",children:"SMARTROLL ADMINISTRATION"})]}),(0,d.jsx)(r.S3,{children:"Please select a semester!!"})]})})]})})}),f&&S?(0,d.jsx)(c.Z,{visible:l,setupdate_timetable:y,setVisible:h,scheduleObj:S,lectureObj:f,currentSelectSemester:p}):null]})}}}]);
//# sourceMappingURL=5371.be973a19.chunk.js.map